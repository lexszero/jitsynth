Технические детали:
- По-разному играть ноты при нажатии клавиш: т.е. можно указать, звучит ли инструмент только пока клавиша нажата или звучит только некоторое время
- Отдельный поток, который будет играть уже записанные мелодии. Большую часть времени он будет спать в pthread_mutex_lock, тред плеера будет его анлочить при конце ноты (sample==len), он будет вбрасывать новые параметры генераторам и засыпать обратно. Возможно, тут потребуется очередь, ибо ноты нескольких треков могут кончиться одновременно.
- Семплер (как задавать семплы?)
- Пост-процессинг (задавать функциями, благо jit-конпелять умеем, возможно потребуется какой-то буфер для хитроэффектов)
- гуйцы? хочу писать строчки, скажем, треков или инструментов, нажимать ЭНТЕР и чтоб оно сразу начинало играть новое говно.

Общие идеи:
Стейт синтезатора - это текущие инструменты и треки. Инструменты - понятно, более-менее реализованы и пашут.
Треки будут двух видов: одни - определены как последовательность команд и играются автоматически последовательно, другие - команды вводятся в реалтайме с помощью кейбиндингов (живая игра).
Стейт может модифицироваться в рантайме. Т.е. юзер написал последовательность команд, нажал кнопочку - начал играться этот трек, итд.
Команды могут быть всякоразные - ноты, паузы, изменение громкости, смена инструмента для трека, лупы, etc.
Сие позволит, например, задать трек ритма и пустить его играться автоматически и одновременно играть руками что-нибудь.
